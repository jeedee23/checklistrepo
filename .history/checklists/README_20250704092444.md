# Checklist Application

A modern, flexible hierarchical checklist management system with a desktop-style UI for creating, managing, and manipulating checklists.

## Overview

This application provides a robust platform for managing hierarchical checklists with rich features including:

- Hierarchical item organization with expand/collapse functionality
- Custom fields and column management
- File attachments and HTML notes
- User management and collaboration
- Version history and conflict resolution
- Customizable UI with themes and styling options
- Modern desktop-style menu bar interface
- Context (right-click) menus for quick actions
- Keyboard shortcuts for power users

## Project Structure

### File Organization

```
Root Files:
├── index.html            # Main application HTML
├── styles.html           # CSS imports

CSS Folder (css/):
├── style.css             # Main styles (including user management dialog)
├── menu.css              # Menu bar styles

JavaScript Folder (js/):
├── app-init.js           # App initialization
├── auth-login.js         # Authentication
├── constants.js          # Shared state & constants
├── data-fields.js        # Field definitions
├── data-files.js         # File attachment handling
├── data-notes.js         # Notes handling
├── data-users.js         # User management
├── data-versions.js      # Version history
├── data.js               # Core load/save operations
├── debug-helpers.js      # Development debugging tools
├── events-global.js      # Global event handlers
├── events-keyboard.js    # Keyboard shortcuts
├── events-timers.js      # Timed events
├── events-ui.js          # UI-specific handlers
├── index.js              # Main entry point
├── menu-build.js         # Menu builder
├── menu-context.js       # Context menu handler
├── menu-integrations.js  # External integrations
├── menu-system.js        # Dynamic menu logic
├── renderchecklist.js    # Checklist rendering
├── security.js           # Security functions
├── styles-manage.js      # Style handling
├── ui-mainrender.js      # Main UI renderer
├── ui-notifications.js   # Toast notifications
├── ui-subrender.js       # Subcomponent renderer
├── user-management.js    # User management dialog (Excel-style)
├── utils.js              # Utility functions
```

### Checklist Storage & Configuration Structure

Stored in GitHub repo: jeedee23/checklistrepo

```
/checklists/
├── YYYY_MM_DD_@_HH-MM-SS_Name.json  # Individual checklist files

/config/
├── config.json       # General application configuration
├── fields.json       # Field definitions
├── last.json         # Last opened checklist tracking
├── layout.json       # Layout templates
├── layouts.json      # Multiple layout configurations
├── listtypes.json    # Checklist type definitions
├── styles.json       # UI style config
├── users.json        # User settings & permissions

/files/
├── YYYY_MM_DD_@_HH-MM-SS_filename  # Uploaded files

/notes/
├── YYYY_MM_DD_@_HH-MM-SS_note.html  # Notes in HTML
```

## Key Modules and Features

### Menu System
- **menu-system.js**: Main logic for dynamic menu generation
- **menu-build.js**: Structure generation for menus
- **menu-context.js**: Context (right-click) menu handling
- Features desktop-style menu bar: File, Edit, View, Tools, Account, Help

### Data Management
- **data.js**: Core load/save/fetch logic
- **data-fields.js**: Field type definitions and management
- **data-notes.js**: HTML notes handling with Quill editor
- **data-files.js**: File attachment uploading and management
- **data-versions.js**: Version history and conflict resolution

### UI Rendering
- **ui-mainrender.js**: Main interface rendering
- **ui-subrender.js**: Items and subcomponents rendering
- **ui-notifications.js**: Toast notification system

### Event Handling
- **events-global.js**: Global event handlers
- **events-keyboard.js**: Keyboard shortcuts
- **events-ui.js**: UI-specific handlers
- **events-timers.js**: Timed events (e.g., inactivity monitor)

## Features

### Checklist Management
- Create/open/save checklists with automatic timestamping
- Template-based checklist creation
- Item and sub-item management with hierarchical organization
- Drag-and-drop column operations
- Column visibility toggle and reordering

### Data Features
- Multiple field types: text, checkbox, date, user assignment, priority, status
- Rich HTML notes with Quill editor
- File attachments with upload/download capability
- User assignment and tracking
- Version history with conflict resolution

### UI Features
- Hierarchical tree view with expand/collapse functionality
- Column customization, sorting, and filtering
- Toast notifications for feedback
- Confirmation dialogs for important actions
- Context menus for quick actions
- Keyboard shortcuts for power users

## Recent Implementations & Fixes

- User Management Dialog with Excel-style table interface
- Consolas 9pt font implementation for professional data-entry appearance
- Light yellow input field backgrounds for better usability
- Modal dialog with proper height and scroll management
- Dynamic menu system with context-sensitive options
- Drag-and-drop column reordering
- Right-click column visibility toggle
- Improved error handling with toast notifications
- Modern notification system
- Refactored application initialization
- Enhanced column order tracking and persistence
- Clean codebase with removed redundant files

## Current Clean State (July 2025)

### What's Been Completed & Cleaned Up

#### User Management System
- **Excel-style User Management Dialog**: Professional table-based interface with Consolas 9pt font
- **Light Yellow Input Fields**: (#FFFACD) background for better data-entry visual distinction
- **Proper Modal Dialog**: Fixed height/scrolling using flexbox layout (only modal-body scrolls)
- **Real Data Loading**: Connected to users.json with fallback to test data
- **Full CRUD Operations**: Create, Read, Update, Delete users with proper validation
- **Navigation**: Previous/Next buttons to cycle through users efficiently
- **2FA Support**: Email and TOTP (placeholder for QR code implementation)
- **Access Levels**: 10 levels from Full Admin (0) to Personal Items Only (9)

#### Code Structure Cleanup
- **Eliminated Redundancy**: Removed duplicate and overlapping code files
- **Streamlined JS Directory**: Clean, maintainable set of 22 focused modules
- **Restored Missing Files**: user-management.js restored with full functionality
- **Consistent Naming**: All files follow clear naming conventions
- **Proper Imports**: All module dependencies correctly resolved

#### Documentation Updates
- **README.md**: Complete current structure with all files listed
- **USER_GUIDE.md**: Comprehensive user documentation with user management section
- **DEVELOPMENT_TASKS.md**: Updated to reflect completed tasks and current priorities
- **ARCHITECTURE.md**: Updated component diagram including user management

### Current File Structure Summary

**Core Application Files:**
- `index.html` - Main application entry point
- `styles.html` - CSS import coordination

**JavaScript Modules (22 files):**
- Core: `app-init.js`, `constants.js`, `index.js`, `utils.js`
- Data Management: `data.js`, `data-fields.js`, `data-files.js`, `data-notes.js`, `data-users.js`, `data-versions.js`
- UI Components: `ui-mainrender.js`, `ui-subrender.js`, `ui-notifications.js`, `user-management.js`
- Menu System: `menu-system.js`, `menu-build.js`, `menu-context.js`, `menu-integrations.js`
- Event Handling: `events-global.js`, `events-keyboard.js`, `events-timers.js`, `events-ui.js`
- Utilities: `auth-login.js`, `debug-helpers.js`, `renderchecklist.js`, `security.js`, `styles-manage.js`

**CSS Files:**
- `style.css` - Main application styles including user management dialog
- `menu.css` - Menu bar specific styles

**Configuration Files:**
- `config.json`, `fields.json`, `last.json`, `layout.json`, `layouts.json`, `listtypes.json`, `styles.json`, `users.json`

### Key Technical Implementations

#### User Management Dialog
```javascript
// Excel-style table with Consolas 9pt font
// Light yellow input backgrounds (#FFFACD)
// Proper modal with flexbox layout
// Real data loading with fallback
// Full CRUD operations with validation
// Navigation between users
// 2FA setup placeholders
```

#### Modal Dialog CSS
```css
/* Fixed height modal with proper scrolling */
/* Only modal-body scrolls, no double scrollbars */
/* Light yellow input backgrounds */
/* Consolas 9pt font for data entry */
/* Professional table layout */
```

### Next Priority Items
1. **TOTP Implementation**: QR code generation and verification
2. **Email Integration**: Send authentication setup emails
3. **First Login Flow**: New user setup process
4. **UI Polish**: Dark mode, accessibility, mobile responsiveness
5. **Advanced Features**: Batch operations, virtual scrolling, etc.

## Getting Started

1. Clone the repository
2. Set up a web server to host the files (or use GitHub Pages)
3. Configure users.json with appropriate access credentials
4. Access index.html in a modern browser

## Development

### Adding a New Field Type

1. Add the field definition to fields.json
2. Update data-fields.js to handle the new field type
3. Add any UI components needed for editing/displaying the field

### Adding a New Menu Item

1. Locate the appropriate menu in menu-system.js
2. Add the new menu item with appropriate handler
3. Implement the handler function

## Licensing

Copyright (c) 2025. All rights reserved.
