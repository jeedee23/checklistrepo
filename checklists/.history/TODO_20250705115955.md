# TODO: Checklist Application Development

## ğŸ”§ Field Manager - Minor Issues
*These are functional but need polish after centralized save is implemented*

### 1. Dialog UI Issues
- [ ] **Options/Source fields not visible**: New field dialog may not be scrollable or fields are positioned outside viewport
- [ ] **Dialog scrollability**: Ensure dialog can scroll when content exceeds viewport height

### 2. Field Creation Workflow
- [ ] **Fields chooser not refreshed**: After creating a new field, the "Choose Fields" dialog doesn't update to show the new field
- [ ] **Field persistence**: New fields are added to `fieldDefs` in memory but not actually saved to `fields.json`
- [ ] **Active/Visible not working**: Fields don't appear in checklist because they don't exist in the saved `fields.json`

### 3. Root Cause Analysis
- **Save Architecture**: The field creation currently only updates in-memory state, not persistent storage
- **UI Refresh**: No mechanism to refresh the fields chooser dialog after field creation
- **State Synchronization**: Disconnect between `fieldDefs` (memory) and `fields.json` (persistent)

---

## ğŸ—ï¸ PRIORITY: Centralized Save Architecture
*This is the foundation that will fix the field manager and enable all other features*

### Core Save Functions to Centralize
- [ ] **saveFieldDefinitions()** - Save fields.json (currently incomplete)
- [ ] **saveChecklist()** - Save checklist data
- [ ] **saveNote()** - Save notes
- [ ] **saveUsers()** - Save user management data
- [ ] **saveConfig()** - Save configuration data
- [ ] **saveLayouts()** - Save layout definitions
- [ ] **saveFilters()** - Save filter definitions

### Architecture Requirements
- [ ] **Single save module**: Create `data-persistence.js` or similar
- [ ] **Consistent error handling**: All save operations should handle errors the same way
- [ ] **Progress indicators**: Show save progress for long operations
- [ ] **Rollback capability**: Ability to revert failed saves
- [ ] **Validation**: Validate data before saving
- [ ] **Backup**: Create backups before overwriting files

### Implementation Strategy
1. **Phase 1**: Create centralized save architecture
2. **Phase 2**: Migrate existing save functions one by one
3. **Phase 3**: Add enhanced features (progress, rollback, validation)
4. **Phase 4**: Return to field manager polish

---

## ğŸ¯ Layout Manager (After Centralized Save)
- [ ] **Create Layout Manager Dialog**: UI for creating/editing layouts
- [ ] **Access Level Controls**: Layout-level access restrictions
- [ ] **Layout Preview**: Show how layout will look for different users
- [ ] **Layout Assignment**: Assign layouts to users/roles

---

## ğŸ” Filter Manager (After Layout Manager)
- [ ] **Create Filter Manager Dialog**: UI for advanced filter creation
- [ ] **Filter Logic Builder**: Visual filter condition builder
- [ ] **Filter Access Controls**: User-level filter restrictions
- [ ] **Filter Testing**: Preview filter results

---

## ğŸ§ª Testing & Validation
- [ ] **Field Manager Testing**: Complete testing of field creation flow
- [ ] **Layout Manager Testing**: Test layout assignment and access controls
- [ ] **Filter Manager Testing**: Test filter creation and application
- [ ] **Integration Testing**: Test all components working together
- [ ] **Performance Testing**: Large dataset handling

---

## ğŸ¨ UI/UX Improvements
- [ ] **Mobile Responsiveness**: Ensure dialogs work on mobile devices
- [ ] **Accessibility**: Add ARIA labels and keyboard navigation
- [ ] **Visual Polish**: Consistent styling across all dialogs
- [ ] **User Feedback**: Better loading states and error messages

---

## ğŸ“š Documentation
- [ ] **API Documentation**: Document all save functions and their parameters
- [ ] **User Guide Updates**: Update user guide with new features
- [ ] **Development Guide**: Guide for future developers
- [ ] **Migration Guide**: Guide for migrating from old save functions

---

## ğŸ”„ Current Status
**NEXT STEP**: Implement centralized save architecture starting with `data-persistence.js`

This will resolve the field manager issues and provide the foundation for all future features.
